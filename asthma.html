<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="th2899" />

<meta name="date" content="2022-12-08" />

<title>Asthma Rates &amp; Urban Green Spaces in NYC</title>

<script src="site_libs/header-attrs-2.16/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Group Project</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="about.html">Our Team</a>
</li>
<li>
  <a href="UGS.html">Urban Greenspaces</a>
</li>
<li>
  <a href="tax_data.html">Tax credits</a>
</li>
<li>
  <a href="asthma.html">Asthma</a>
</li>
<li>
  <a href="temp.html">Temperature</a>
</li>
<li>
  <a href="anlysis.html">Joint Analysis Dashboard</a>
</li>
<li>
  <a href="Codebook.html">Codebook</a>
</li>
<li>
  <a href="mailto:&lt;nh2706@cumc.columbia.edu&gt;">
    <span class="fa fa-envelope fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/EmmaWarshaw/P8105_Group_Project">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">



<h1 class="title toc-ignore">Asthma Rates &amp; Urban Green Spaces in
NYC</h1>
<h4 class="author">th2899</h4>
<h4 class="date">2022-12-08</h4>

</div>


<p>Asthma is a disease that causes breathing problems. It inflames and
narrows the airways that carry oxygen in and out of the lungs. People
with asthma can have recurring periods of wheezing, chest tightness,
shortness of breath and coughing. These breathing problems are called
asthma attacks or episodes. Asthma is a chronic disease. In other words,
people with asthma live with it every day. Asthma is triggered by an
allergic reaction between the lungs and allergens in the environment
including air pollution, diesel exhaust particles, tobacco smoke,
cockroach particles, dander, and mold (Columbia Center for Children’s
Environmental Health, 2022).</p>
<p>Asthma is a serious public health problem in New York State and the
nation. It affects about 10.0 percent (more than 400,000) of children
and 9.9 percent (more than 1.5 million) of adults in New York State.
Asthma takes its toll in many ways. It can result in lost nights of
sleep and disruption of activities for the individual, as well as for
his or her family. Asthma is the leading cause of school absenteeism in
children, and parents frequently miss days from work as a result of
their child’s asthma.</p>
<p>Each year, nearly half a million people in the United States are
hospitalized for asthma. Asthma ED visits and hospitalization rates tell
us about the effect of asthma in a community due to environmental and
household triggers, access to medical care, and the quality of disease
management for asthma. ED visits and hospitalization shows us only the
most severe cases of asthma; most people with asthma suffer the health
effects without needing to go to hospital.</p>
<p>Heightened asthma rates are one of the negative health outcomes
resulting from high population density of cities (and resulting high
density of environmental toxins being released into the atmosphere). The
burden of asthma falls disproportionately on the most disadvantaged
residents of New York City. A study has reported that children in East
Harlem are 13 times more likely to go to the emergency room for
asthma-related incidents compared to children in the nearby affluent
Upper East side. The inequality is reflected by the 31% of East Harlem
residents living in poverty compared to 7% in the Upper East Side.
Racial demographics mirror this pattern, with East Harlem being half
Latino and one third Black compared to the 78% White Upper East Side
(LóPez et al., 2015).</p>
<p>Could roofs planted with vegetation, aka. <strong>Urban Green Spaces
(UGS)</strong>, help reduce the burden of asthma? At least in theory,
plants absorb gaseous pollutants that are in the air. By absorbing
harmful gases, plants release oxygen into the atmosphere which could
help to combat the harmful effects of air pollution. Our hypothesis is
that by having green spaces in urbanised areas, such as rooftop
vegetation, a higher quality of the air within the surrounding area
could be achieved.</p>
<p>In the following analysis, we will be drawing on a dataset of asthma
hopsitalizations and ED visits between 2000 and 2019 in New York State,
broken down by regions. A total of 3870 observations are recorded in the
original dataset, but data cleaning and wrangling will reduce total
observations to a smaller, more relevant number.</p>
<div id="goals-of-the-analysis" class="section level2">
<h2>Goals of the analysis</h2>
<p>The primary goal of this analysis is to provide an overview of asthma
rates across the different boroughs of NYC. We would like to understand
how the asthma burden of asthma is distributed across the different
borough, as well as analyse whether there have been any changes over
time. Secondly, we would like to understand whether there might be any
links between the UGS dataset and the asthma dataset. For example, did
increases in the primary dataset on NYC Urban Green Spaces also
correlate with a simultaneous decrease in asthma rates?</p>
</div>
<div id="data-load-wrangling" class="section level2">
<h2>Data load &amp; wrangling</h2>
<p>We load and wrangle the <strong>two primary Urban Green Spaces (UGS)
dataset</strong> as described in the page dedicated to the UGS dataset
to generate a <strong><code>UG_df</code> dataframe</strong> and an
<strong><code>UG_agg_df</code> dataframe</strong>.</p>
<p>Next, we load and wrangle the <strong>secondary NY Asthma
dataset</strong> to generate a <strong>asthma_df dataframe</strong>. The
original .csv dataset is available in the “data” folder within the
project’s repository. The following procedure is applied:</p>
<ul>
<li>filter out relevant observations (aka the boroughs of New York City
from years 2006-2018) using <code>filter()</code></li>
<li>select relevant variables using <code>select()</code></li>
<li>rename certain variables for comprehension using
<code>remame()</code>, as well as certain borough names and years using
<code>mutate()</code>and <code>recode</code>()`</li>
<li>re-order the variables using <code>arrange()</code></li>
<li>calculate percentage of green coverage of each building, as well as
<code>recode()</code> borough names and ownership status, and convert
sqm int sqm, using <code>mutate()</code></li>
<li>note ownertypes are aggregated into “Public”, “Private” and “Other”
as per mapPLUTO definitions (refer to the codebook for more details).
Given the presence of “na”, the <code>replace_na()</code> function is
employed.</li>
</ul>
<p>Next, I also create a second dataframe with the goal of creating a
‘severity’ measure, which is the nr of ED visits divided by
Hospitalzations (both per 10k inhabitants), for each borough and year
separately. This requires the use of <code>pivot_wider()</code>,
<code>mutate()</code> and <code>pivot_longer()</code></p>
<p>Note that all variable names are available in the <strong>Project’s
codebook</strong> section.</p>
</div>
<div id="descriptive-analysis" class="section level2">
<h2>Descriptive analysis</h2>
<p>Next, we perform a descriptive analysis of the NY Asthma secondary
dataset, as well as stratified analysis at the borough level.</p>
<p>Overall, the *<strong>asthma_df</strong> contains contains 6
variables related to 156 measures of asthma in NYC.</p>
<p>Below graph shows the development of ED visits per 10k inhabitants
between 2006-2018 across all of New York City. Rates increased until
2013 to a peak of close to 160 recorded ED visits per 10k inhabitants,
after which a stark drop has been recorded, a trend that seems to
coninue to this day. In 2018 recorded ED visits per 10k inhabitants were
down to close to 110 per 10k inhabitants.</p>
<p><img src="asthma_files/figure-html/unnamed-chunk-5-1.png" width="90%" /></p>
<p>Next, we look a graph that shows the development of Hospitalizations
per 10k inhabitants between 2006 and 2018 across all of New York City.
After remaining stable at approx. 35 per 10k inhabitants, the rate
started to drop continosly and has reached less than half of that value
of appox. 15 per 10k inhabitants. On first glance, it seems as if
hospitalizations have decreased more than ED visits, indicating that
while both rates and severity of asthma have dropped, severity as
declined more.</p>
<p><img src="asthma_files/figure-html/unnamed-chunk-6-1.png" width="90%" /></p>
<p>To test this we next plotted the severity measure we calculated
manually: the rate of Hospitalizations per 10k inhabitants divided by
the rate of ED Visits per 10k inhabitants. We conclude that our above
hypothesis seemed to have been correct: in 2006 roughly ever fourth (or
approx. 24%) of ED visits resulted in Hospitalizations, that number has
gradually decreased to every seventh-eight (or approx 13%). Ee hereby
assume that every Hospitalizations resulted in a prior ED visit.</p>
<p><img src="asthma_files/figure-html/unnamed-chunk-7-1.png" width="90%" /></p>
</div>
<div id="static-analysis-by-boroughs" class="section level2">
<h2>Static Analysis by Boroughs</h2>
<p>Below table shows ED visits and Hospitalizations per 10k inhabitants
for each borough, and for New York City overall as averages across
2006-2018. The Bronx is a clear outlier, with 264 / 10k ED visits and 56
/10k Hospitalizations, compared to the city average of 143 / 10k ED
visits and 28 / 10k ED visits. Manhattan is slightly above the average,
while Brooklyn is slightly below. Queens and Staten Island are clearly
below the average. In summary, the burden of asthma historically clearly
does not seem to be distributed evenly across the different borough of
New York City.</p>
<table>
<thead>
<tr class="header">
<th align="left">borough</th>
<th align="right">ED Visits</th>
<th align="right">Hospitalizations</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Bronx</td>
<td align="right">263.83</td>
<td align="right">55.73</td>
</tr>
<tr class="even">
<td align="left">Brooklyn</td>
<td align="right">136.00</td>
<td align="right">26.16</td>
</tr>
<tr class="odd">
<td align="left">Manhattan</td>
<td align="right">151.51</td>
<td align="right">22.84</td>
</tr>
<tr class="even">
<td align="left">New York City</td>
<td align="right">143.09</td>
<td align="right">27.54</td>
</tr>
<tr class="odd">
<td align="left">Queens</td>
<td align="right">84.32</td>
<td align="right">17.10</td>
</tr>
<tr class="even">
<td align="left">Staten Island</td>
<td align="right">82.44</td>
<td align="right">16.91</td>
</tr>
</tbody>
</table>
<p>Let’s look at whether these inequlities still persisted in the most
recent measurement Below table shows ED visits and Hospitalizations per
10k inhabitants for each borough, and for New York City overall as
averages across 2006-2018. Asthma rates across all boroughs have
decreased. While Bronx rates went down to 221 / 10k and 34 / 10k ED
visits resp. Hospitalizations, the New York City average lowered to 116
/ 10k and 15 / 10k ED visits resp. Hospitalizations. As a result, the
inequities observed across the different boroughs seem to have
persisted.</p>
<table>
<thead>
<tr class="header">
<th align="left">borough</th>
<th align="right">ED Visits</th>
<th align="right">Hospitalizations</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Bronx</td>
<td align="right">220.84</td>
<td align="right">33.54</td>
</tr>
<tr class="even">
<td align="left">Brooklyn</td>
<td align="right">109.20</td>
<td align="right">12.64</td>
</tr>
<tr class="odd">
<td align="left">Manhattan</td>
<td align="right">117.33</td>
<td align="right">12.45</td>
</tr>
<tr class="even">
<td align="left">New York City</td>
<td align="right">116.32</td>
<td align="right">15.31</td>
</tr>
<tr class="odd">
<td align="left">Queens</td>
<td align="right">68.12</td>
<td align="right">9.90</td>
</tr>
<tr class="even">
<td align="left">Staten Island</td>
<td align="right">68.30</td>
<td align="right">10.24</td>
</tr>
</tbody>
</table>
<p>The following graph visualizes above: ED visits / 10k inhabitants by
borough in 2018. the Bronx is particularly hit with high asthma rates,
even as of today.</p>
<p><img src="asthma_files/figure-html/unnamed-chunk-10-1.png" width="90%" /></p>
<p>A very similar pattern is observed for hospitalizations rates / 10k
inhabitants by borough in 2018. The unequal burden is even more
accentuated, as the Bronx tops the list by a wide margin. The Bronx not
only seems to be affected more by higher asthma rates, the asthma cases
also seem to be more severe (relatively) to the other boroughs.</p>
<p><img src="asthma_files/figure-html/unnamed-chunk-11-1.png" width="90%" /></p>
<p>Lastly, before we move to to visualizations over time, we wanted to
take a look at absolute burden across the different boroughs. The
following table show a the total number of ED Visits and
Hospitalizations per borough (i.e., not adjusted per 10k inhabitants) in
2018. Still Bronx tops the list with 95k ED visits, followed by Brooklyn
with 82k - compared to the total number in NYC of 279k this means that
those two boroughs make up roughly two thirds of all asthma related ED
visits. The same holds true for hospitalizations, where Bronx recorded
14k and Brooklyn 10k in 2018 (compared to 37k across NYC).</p>
<table>
<thead>
<tr class="header">
<th align="left">borough</th>
<th align="right">ED Visits</th>
<th align="right">Hospitalizations</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Bronx</td>
<td align="right">94758</td>
<td align="right">14441</td>
</tr>
<tr class="even">
<td align="left">Brooklyn</td>
<td align="right">82412</td>
<td align="right">9547</td>
</tr>
<tr class="odd">
<td align="left">Manhattan</td>
<td align="right">49141</td>
<td align="right">4980</td>
</tr>
<tr class="even">
<td align="left">New York City</td>
<td align="right">278838</td>
<td align="right">36918</td>
</tr>
<tr class="odd">
<td align="left">Queens</td>
<td align="right">43355</td>
<td align="right">6546</td>
</tr>
<tr class="even">
<td align="left">Staten Island</td>
<td align="right">9172</td>
<td align="right">1404</td>
</tr>
</tbody>
</table>
<p>The following graphic visualized what was discussed above, at the
example of ED absolute nr of visits in 2018. The Bronx and Brooklyn are
clearly carrying the largest burden of asthma ED visits.</p>
<p><img src="asthma_files/figure-html/unnamed-chunk-13-1.png" width="90%" /></p>
</div>
<div id="analysis-over-time-by-borough" class="section level2">
<h2>Analysis over time by borough</h2>
<p>This section is the most critical one, as we analyze how rates have
changed over time.</p>
<p>Below graph visualizes ED visits / 10k inhabitants per borough from
2006 to 2018. The patterns over time are relatively consistent: the
Bronx has always been the most affected borough, and QUeens / Staten
Island always the least, while Manhattan and Brooklyn were always close
to the city average. The Bronx experienced much more fluctuation in
rates, a decrease from 2006-2010 was followed by an increase until 2014
and a subsequent stark decline until 2018. All borough seem to
experience sinking ED visit rates over between 2014-2018.</p>
<p><img src="asthma_files/figure-html/unnamed-chunk-14-1.png" width="90%" /></p>
<p>Below graph visualizes Hospitalizations / 10k inhabitants per borough
from 2006 to 2018. The general pattern is different to ED visits, as
nearly all boroughs experienced a consitent decline in Hospitalization
rates since 2006. The bronx tops the list across all years, while all
other borough have gotten very close to the city average.</p>
<p><img src="asthma_files/figure-html/unnamed-chunk-15-1.png" width="90%" /></p>
<p>Lastly, we look at severity of asthma in the boroughs across time by
using our measure of hospitalizations divided by ED visits.
Interestingly, this is the one measure where the Bronx (while still
remaining among the highest on the list) has managed to close the gap to
the other borough a bit. Still, in the Bronx about 15% of ED visits lead
to hospitalizations, while that number only 10% in Manhattan.</p>
<p><img src="asthma_files/figure-html/unnamed-chunk-16-1.png" width="90%" /></p>
</div>
<div id="linear-models" class="section level2">
<h2>Linear Models</h2>
<p>Next, we will be analyzing whether linear models can provide further
insights.</p>
<p>First step is to create three dataframes (one for each indicator)
that do not include New York City overall and set Manhattan as the
comparator borough.</p>
<p>Running a linear regression for ED visits, all values are
significant: the Bronx is predicted to have 112 / 10k ED visits more
vs. Manhattan, while Brooklyn, Queens, and Staten island are predicted
to have 16 / 10k, 67 / 10k resp. 69 / 10k less than Manhattan.</p>
<table>
<thead>
<tr class="header">
<th align="left">term</th>
<th align="right">estimate</th>
<th align="right">std.error</th>
<th align="right">statistic</th>
<th align="right">p.value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">151.51</td>
<td align="right">3.76</td>
<td align="right">40.33</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">boroughBronx</td>
<td align="right">112.32</td>
<td align="right">5.31</td>
<td align="right">21.14</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">boroughBrooklyn</td>
<td align="right">-15.51</td>
<td align="right">5.31</td>
<td align="right">-2.92</td>
<td align="right">0</td>
</tr>
<tr class="even">
<td align="left">boroughQueens</td>
<td align="right">-67.19</td>
<td align="right">5.31</td>
<td align="right">-12.65</td>
<td align="right">0</td>
</tr>
<tr class="odd">
<td align="left">boroughStaten Island</td>
<td align="right">-69.06</td>
<td align="right">5.31</td>
<td align="right">-13.00</td>
<td align="right">0</td>
</tr>
</tbody>
</table>
<p>Running a linear regression for Hospitalizations, all values except
for Brooklyn and Queens are significant: the Bronx and Brooklyn are
predicted to have 33 / 10k resp.3 / 10k hospitalizations more
vs. Manhattan, while Queens and Staten Island are predicted to have
approx 6 / 10k each less than Manhattan.</p>
<table>
<thead>
<tr class="header">
<th align="left">term</th>
<th align="right">estimate</th>
<th align="right">std.error</th>
<th align="right">statistic</th>
<th align="right">p.value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">22.84</td>
<td align="right">2.10</td>
<td align="right">10.89</td>
<td align="right">0.00</td>
</tr>
<tr class="even">
<td align="left">boroughBronx</td>
<td align="right">32.90</td>
<td align="right">2.97</td>
<td align="right">11.09</td>
<td align="right">0.00</td>
</tr>
<tr class="odd">
<td align="left">boroughBrooklyn</td>
<td align="right">3.33</td>
<td align="right">2.97</td>
<td align="right">1.12</td>
<td align="right">0.27</td>
</tr>
<tr class="even">
<td align="left">boroughQueens</td>
<td align="right">-5.73</td>
<td align="right">2.97</td>
<td align="right">-1.93</td>
<td align="right">0.06</td>
</tr>
<tr class="odd">
<td align="left">boroughStaten Island</td>
<td align="right">-5.92</td>
<td align="right">2.97</td>
<td align="right">-2.00</td>
<td align="right">0.05</td>
</tr>
</tbody>
</table>
<p>Also the severity measures are all significant. The actual values are
a bit difficult to interpret, but all boroughs seem to experience higher
severity vs. Manhattan.</p>
<table>
<thead>
<tr class="header">
<th align="left">term</th>
<th align="right">estimate</th>
<th align="right">std.error</th>
<th align="right">statistic</th>
<th align="right">p.value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">0.15</td>
<td align="right">0.01</td>
<td align="right">13.39</td>
<td align="right">0.00</td>
</tr>
<tr class="even">
<td align="left">boroughBronx</td>
<td align="right">0.06</td>
<td align="right">0.02</td>
<td align="right">3.99</td>
<td align="right">0.00</td>
</tr>
<tr class="odd">
<td align="left">boroughBrooklyn</td>
<td align="right">0.04</td>
<td align="right">0.02</td>
<td align="right">2.69</td>
<td align="right">0.01</td>
</tr>
<tr class="even">
<td align="left">boroughQueens</td>
<td align="right">0.05</td>
<td align="right">0.02</td>
<td align="right">3.33</td>
<td align="right">0.00</td>
</tr>
<tr class="odd">
<td align="left">boroughStaten Island</td>
<td align="right">0.06</td>
<td align="right">0.02</td>
<td align="right">3.52</td>
<td align="right">0.00</td>
</tr>
</tbody>
</table>
</div>
<div id="comparison-with-ugs" class="section level2">
<h2>Comparison with UGS</h2>
<p>Next we will do a comparison with the UGS dataset, first visually and
then also based on linear models.</p>
<p>First, we create a value of green spaces that we can compare to
asthma rates, namely the cumulative surface area of vertical greenspace
that has been constructed between 2006-2018 in each borough.</p>
<table>
<thead>
<tr class="header">
<th align="left">borough</th>
<th align="right">cons_year</th>
<th align="right">green_area_sum</th>
<th align="right">green_area_cum</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Bronx</td>
<td align="right">2006</td>
<td align="right">1430.45</td>
<td align="right">1430.45</td>
</tr>
<tr class="even">
<td align="left">Bronx</td>
<td align="right">2007</td>
<td align="right">942.75</td>
<td align="right">2373.20</td>
</tr>
<tr class="odd">
<td align="left">Bronx</td>
<td align="right">2008</td>
<td align="right">1525.18</td>
<td align="right">3898.38</td>
</tr>
<tr class="even">
<td align="left">Bronx</td>
<td align="right">2009</td>
<td align="right">574.71</td>
<td align="right">4473.08</td>
</tr>
<tr class="odd">
<td align="left">Bronx</td>
<td align="right">2010</td>
<td align="right">1579.57</td>
<td align="right">6052.65</td>
</tr>
<tr class="even">
<td align="left">Bronx</td>
<td align="right">2011</td>
<td align="right">606.97</td>
<td align="right">6659.62</td>
</tr>
<tr class="odd">
<td align="left">Bronx</td>
<td align="right">2013</td>
<td align="right">276.50</td>
<td align="right">6936.12</td>
</tr>
<tr class="even">
<td align="left">Bronx</td>
<td align="right">2014</td>
<td align="right">566.23</td>
<td align="right">7502.36</td>
</tr>
<tr class="odd">
<td align="left">Bronx</td>
<td align="right">2016</td>
<td align="right">741.25</td>
<td align="right">8243.60</td>
</tr>
<tr class="even">
<td align="left">Brooklyn</td>
<td align="right">2007</td>
<td align="right">6843.79</td>
<td align="right">6843.79</td>
</tr>
<tr class="odd">
<td align="left">Brooklyn</td>
<td align="right">2008</td>
<td align="right">103.05</td>
<td align="right">6946.84</td>
</tr>
<tr class="even">
<td align="left">Brooklyn</td>
<td align="right">2009</td>
<td align="right">1111.39</td>
<td align="right">8058.23</td>
</tr>
<tr class="odd">
<td align="left">Brooklyn</td>
<td align="right">2010</td>
<td align="right">2496.56</td>
<td align="right">10554.80</td>
</tr>
<tr class="even">
<td align="left">Brooklyn</td>
<td align="right">2011</td>
<td align="right">13776.28</td>
<td align="right">24331.08</td>
</tr>
<tr class="odd">
<td align="left">Brooklyn</td>
<td align="right">2012</td>
<td align="right">752.78</td>
<td align="right">25083.86</td>
</tr>
<tr class="even">
<td align="left">Brooklyn</td>
<td align="right">2013</td>
<td align="right">524.56</td>
<td align="right">25608.41</td>
</tr>
<tr class="odd">
<td align="left">Brooklyn</td>
<td align="right">2014</td>
<td align="right">854.42</td>
<td align="right">26462.83</td>
</tr>
<tr class="even">
<td align="left">Brooklyn</td>
<td align="right">2015</td>
<td align="right">1344.79</td>
<td align="right">27807.62</td>
</tr>
<tr class="odd">
<td align="left">Manhattan</td>
<td align="right">2006</td>
<td align="right">5838.59</td>
<td align="right">5838.59</td>
</tr>
<tr class="even">
<td align="left">Manhattan</td>
<td align="right">2007</td>
<td align="right">8377.50</td>
<td align="right">14216.09</td>
</tr>
<tr class="odd">
<td align="left">Manhattan</td>
<td align="right">2008</td>
<td align="right">4532.25</td>
<td align="right">18748.34</td>
</tr>
<tr class="even">
<td align="left">Manhattan</td>
<td align="right">2009</td>
<td align="right">1912.66</td>
<td align="right">20661.00</td>
</tr>
<tr class="odd">
<td align="left">Manhattan</td>
<td align="right">2010</td>
<td align="right">2205.54</td>
<td align="right">22866.53</td>
</tr>
<tr class="even">
<td align="left">Manhattan</td>
<td align="right">2011</td>
<td align="right">14391.25</td>
<td align="right">37257.78</td>
</tr>
<tr class="odd">
<td align="left">Manhattan</td>
<td align="right">2012</td>
<td align="right">742.04</td>
<td align="right">37999.82</td>
</tr>
<tr class="even">
<td align="left">Manhattan</td>
<td align="right">2013</td>
<td align="right">1165.55</td>
<td align="right">39165.37</td>
</tr>
<tr class="odd">
<td align="left">Manhattan</td>
<td align="right">2015</td>
<td align="right">1507.17</td>
<td align="right">40672.54</td>
</tr>
<tr class="even">
<td align="left">Manhattan</td>
<td align="right">2016</td>
<td align="right">411.37</td>
<td align="right">41083.91</td>
</tr>
<tr class="odd">
<td align="left">Queens</td>
<td align="right">2006</td>
<td align="right">1379.60</td>
<td align="right">1379.60</td>
</tr>
<tr class="even">
<td align="left">Queens</td>
<td align="right">2007</td>
<td align="right">980.11</td>
<td align="right">2359.72</td>
</tr>
<tr class="odd">
<td align="left">Queens</td>
<td align="right">2008</td>
<td align="right">202.25</td>
<td align="right">2561.97</td>
</tr>
<tr class="even">
<td align="left">Queens</td>
<td align="right">2009</td>
<td align="right">541.88</td>
<td align="right">3103.84</td>
</tr>
<tr class="odd">
<td align="left">Queens</td>
<td align="right">2010</td>
<td align="right">978.16</td>
<td align="right">4082.00</td>
</tr>
<tr class="even">
<td align="left">Queens</td>
<td align="right">2011</td>
<td align="right">619.90</td>
<td align="right">4701.90</td>
</tr>
<tr class="odd">
<td align="left">Queens</td>
<td align="right">2012</td>
<td align="right">961.81</td>
<td align="right">5663.71</td>
</tr>
<tr class="even">
<td align="left">Queens</td>
<td align="right">2013</td>
<td align="right">416.90</td>
<td align="right">6080.61</td>
</tr>
<tr class="odd">
<td align="left">Queens</td>
<td align="right">2015</td>
<td align="right">151.63</td>
<td align="right">6232.24</td>
</tr>
<tr class="even">
<td align="left">Staten Island</td>
<td align="right">2011</td>
<td align="right">709.47</td>
<td align="right">709.47</td>
</tr>
</tbody>
</table>
<p>We first visualize the result and compare it to the graph created on
ED visits (taking that as a proxy for asthma rates). One trend is clear:
while asthma rates seem to have declined, there seems to have been an
increase in UGS. The patterns are not consistent across borough, e.g.,
there has been only gradual improvement in UGS in the Bronx, while the
decline in asthma was more drastic. In short, there must surely be many
other factors at play that have caused asthma rates to decline, but
potentially UGS did play an effect in reducing the numbers.</p>
<p><img src="asthma_files/figure-html/unnamed-chunk-22-1.png" width="90%" /></p>
<p>Let’s run a couple of linear regression to see whether they produce
any statistically significant results.</p>
<p>First, we are creating a combined df consisting of both UGS and
asthma datasets by using a (double) leftjoin based on borough and year.
We are using na.locf() to replace missing UGS values with the value from
the last year (i.e, if there was a year with no greenspaces added, then
that year must have had the same total number of greenspaces as the last
year). Due to the way the dataframe is structured this requires a manual
insertion of a value at two points of the dataset.</p>
<p>Let’s run some regression! First I am creating separate dataframes
for each indicator and set Manhattan as the comparator.</p>
<p>Below tables show the results of linear regression of the indicator
(either ED visit rate, hospitalization rate or severity measure) on a
combination of borough and total UGS surface area.</p>
<p>ED visit rate vs. borough and cumulative UGS surface area:</p>
<table>
<thead>
<tr class="header">
<th align="left">term</th>
<th align="right">estimate</th>
<th align="right">std.error</th>
<th align="right">statistic</th>
<th align="right">p.value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">169.474</td>
<td align="right">8.610</td>
<td align="right">19.684</td>
<td align="right">0.000</td>
</tr>
<tr class="even">
<td align="left">green_area_cum</td>
<td align="right">-0.001</td>
<td align="right">0.000</td>
<td align="right">-2.332</td>
<td align="right">0.024</td>
</tr>
<tr class="odd">
<td align="left">boroughBronx</td>
<td align="right">97.871</td>
<td align="right">8.244</td>
<td align="right">11.872</td>
<td align="right">0.000</td>
</tr>
<tr class="even">
<td align="left">boroughBrooklyn</td>
<td align="right">-22.158</td>
<td align="right">6.138</td>
<td align="right">-3.610</td>
<td align="right">0.001</td>
</tr>
<tr class="odd">
<td align="left">boroughQueens</td>
<td align="right">-82.420</td>
<td align="right">8.497</td>
<td align="right">-9.700</td>
<td align="right">0.000</td>
</tr>
</tbody>
</table>
<p>Hospitalization rate vs. borough and cumulative UGS surface area:</p>
<table>
<thead>
<tr class="header">
<th align="left">term</th>
<th align="right">estimate</th>
<th align="right">std.error</th>
<th align="right">statistic</th>
<th align="right">p.value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">41.361</td>
<td align="right">4.235</td>
<td align="right">9.767</td>
<td align="right">0.000</td>
</tr>
<tr class="even">
<td align="left">green_area_cum</td>
<td align="right">-0.001</td>
<td align="right">0.000</td>
<td align="right">-4.889</td>
<td align="right">0.000</td>
</tr>
<tr class="odd">
<td align="left">boroughBronx</td>
<td align="right">17.994</td>
<td align="right">4.055</td>
<td align="right">4.438</td>
<td align="right">0.000</td>
</tr>
<tr class="even">
<td align="left">boroughBrooklyn</td>
<td align="right">-3.523</td>
<td align="right">3.019</td>
<td align="right">-1.167</td>
<td align="right">0.249</td>
</tr>
<tr class="odd">
<td align="left">boroughQueens</td>
<td align="right">-21.433</td>
<td align="right">4.179</td>
<td align="right">-5.129</td>
<td align="right">0.000</td>
</tr>
</tbody>
</table>
<p>Severity vs. borough and cumulative UGS surface area:</p>
<table>
<thead>
<tr class="header">
<th align="left">term</th>
<th align="right">estimate</th>
<th align="right">std.error</th>
<th align="right">statistic</th>
<th align="right">p.value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">(Intercept)</td>
<td align="right">0.257849</td>
<td align="right">0.020177</td>
<td align="right">12.779207</td>
<td align="right">0.000000</td>
</tr>
<tr class="even">
<td align="left">green_area_cum</td>
<td align="right">-0.000004</td>
<td align="right">0.000001</td>
<td align="right">-6.070234</td>
<td align="right">0.000000</td>
</tr>
<tr class="odd">
<td align="left">boroughBronx</td>
<td align="right">-0.025629</td>
<td align="right">0.019319</td>
<td align="right">-1.326596</td>
<td align="right">0.191052</td>
</tr>
<tr class="even">
<td align="left">boroughBrooklyn</td>
<td align="right">0.001578</td>
<td align="right">0.014385</td>
<td align="right">0.109702</td>
<td align="right">0.913113</td>
</tr>
<tr class="odd">
<td align="left">boroughQueens</td>
<td align="right">-0.040728</td>
<td align="right">0.019912</td>
<td align="right">-2.045361</td>
<td align="right">0.046440</td>
</tr>
</tbody>
</table>
<p>To our surprise, all three models return statistically significant
values for the effect of cumulative UGS surface area on the studied
indicators, while accounting for borough differences. The direction of
the effect is how we would expect: increase in cumlulative UGS surface
area leads to a reduction in ED visit rate, hospitalization rate, and
our severity measure! We conclude that uban green spaces might indeed
have played a role in reducing asthma rates across New York City.</p>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
